# CarboDebt conract directory.

A smart contract/ dApp for tracking  emission responsabilities associated with the consumption of hydrocarbon resources. 

Not a carbon credit program. It is a debt contract. The pupose of the contracts are to provide a scientifically rigorous account of where emission debt is coming from and how it is being traded.

Debt holder can pay a fee to abate their emissions through an approved carbon sinker, such as sequestration, reforestation. Sinkers certify the CarboDebt to issue CarboGold, converting it into a neutral emission: an amount of carbon removed from the atmosphere based on agreements between debt participants. The value of carbon gold could reflect the marginal cost of the carbon sinker, or some perceived value that a producer/consumer may be willing to pay to receive CarboGold rather than CarboDebt, as proof of offset emissions.

## Getting Started

We summarize the function of the carbo-debt contract in the 5 points below.

1.  anyone can create a carbo debt wallet to issue carbon budget attributed to production ownership of commodity with a known energy content/intput 

2.  Each participant in a contract is defined by a given decentralized identifier (DiD)
    supplier (hydrocarbon producers). Usually the first creators of carbon debt
    consumer (can voluntarily create debt contract if not initiated further upstream)
    carbon sinker (sequestration, reforestation, ,,,)

    sinkers also play the role of converting Carbon debt into carbon gold ...

3.  Can request to send/receive carbo debt from a counter-party, with the all parties approval (signature)

4.  The debt contract is transferred on 
        sale of commodity, 
        paying sinker to offload the responsability

5.  Contract participants can fund contract use by carbon manager to off-take the debt

6.  Recipients can decline to receive the debt, and contract may communicate the additional charge for retaining the debt. Or sender cna offer the option to receive CarboGold in exchange for an additional fee.

### Prerequisites
* [Solidity](https://solidity.readthedocs.io/en/v0.5.3/installing-solidity.html) - Smart contract compiler

```
npm install -g solc
```

* [Truffle](https://www.trufflesuite.com/docs/truffle/getting-started/installation) - Development toolkit
```
npm install -g truffle
```

* [Ganache](https://github.com/trufflesuite/ganache-cli/blob/master/README.md) - Personal Blockchain

```
npm install -g ganache-cli
```
* [Or use the Gnache Gui](https://www.trufflesuite.com/docs/ganache/quickstart) 


### Testnet (Ropsten) Instruction

These are instructions for interacting with the Beta version of CarboDebt hosted on the Ropsten using Remix and MetaMask

* Download and install [MetaMask]( https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn?hl=en) plugin form Chrome

* Select the Ropsten Test Network within MetaMask

* Send some Ether to your wallet generated by MetaMask using a [Rposten faucet](https://faucet.ropsten.be/)

* Open [Remix](https://remix.ethereum.org/) 

* Use the file explorer to upload flatContract.sol and compile

* From the Deploy and Run Transactions tab set Environment to Injected Web3

* Should see same wallet address from MetaMask with ether from Ropsten faucet (wait for cnofirmation)

* load the following contracts using the At Address button

    MultiSigWalletFactory Address (this is used to create MultiSigWallets for CarboDebt wallet pairs)
    ```
    0x08AA8Ae1E7A087b591a5a1234fBE20e592c5c417
    ```

    CabroDebt Address
    ```
    0x6875735ee7864673B211eC2ec2a534179F863DAD
    ```

* From CarboDebt contract signup using your wallet addresss

* Add debt, createEscrow, createTransaction, etc ...

* TODO build application


### Installing

Not much yet

```
chmod u+x run.sh 
```
```
./run.sh
```
 
Too flatten all the contracts fro easy import into solidity browser ([Remix](https://remix.ethereum.org/) )
```
truffle-flattener contracts/CarboDebt.sol >> flatContract.sol
```

There are two strategies for implementing carbo-debt;
    1. a trustless and voluntary carbon management game (more complex network dynamics, easier institutional framework)
    2. a trusted/permissioned binding contract  (less complicated network design, more challenging institutional design). 


Trustless game, anonymous voluntary participation. 
    a. A non-binding carbon management game
    b. designed to operate on a permissionless network (e.g. ethereum). More copmlex network dynamics
    c. Anyone can create a wallet to voluntarily issue debt contracts
    d. Wallet owners are free to choose the DID used to represent it in a debt contracts as
    e. Within the game there is no trust held in the the role of each contract participant. They can not be held accountable for their stated role. This are non-binding.Does not guarantee that a contract participant conforms to the DID it has selected
    f. Network scalability becomes a challenge under this design
    g. decentralized but trustless. anyone can create a DID and therefore offload any accumulated debt by owning keys to both a carbon consumers , and management DID. 
    h. Need to establish rules that encourage fair competition. For example most creative strategies for offloading debt

Trusted identity network . Legally accountable contracts.

    a. Operate under a permissioned ID network (e.g. hyperledger Indy) where stewards are selected to issue trusted decentralized identifiers (DIDs)
    b. Only stewards can issue verified DIDs (trusted) 
    c Greater network scalability and efficiency
    d. must establish an independent governance body to ensure fair and decentralized DID registration
    e. easier network to operate, but requires development of multilateral institutions on how to manage trust in carbon debt contracts
    f. fair representation/registration of producers and consumer's  
    g. independent environmental institutions to regulate DID fo carbon managers
    h. Efforts needed to avoid centralization of the trusted DID network
    can be legally binding as there is an element of trust in DID ownership and issuance
    i. Cheating is less of an issue (trust) but must invest in oversight and complex rules to govern the issuance and expiry of DIDs and contract terms.


See below a list of proposed Carbon credit schemes (competitors?)

https://medium.com/@robertgreenfieldiv/blockchain-enabled-carbon-credit-markets-1a195520f0e1

https://medium.com/@rzurrer/the-carbon-token-ecosystem-white-paper-a-decentralized-p2p-self-organizing-consensus-mechanism-and-aa218bdeeb64

https://drive.google.com/file/d/1D4jmU_TQ3TnEaBhMNpM-phs1tZvRwttn/view


General Idea concerning "the bin" and pricing mechanics
    We may need to have some sort of generalized Supply and Demand function that tracks the gold in the system
    If we can stack the stampers from cheapest to most expensive, and the gold they have available, we can line it up against the level of demand for gold and determine the marginal price that everyone would pay at that particular moment.
    So, something like (pseudocode):
    uint demand = x;
    uint supply = 0;
    uint price = 0;
    while (supply<demand){
        find next cheapest stamper;
        supply += stampergold;
        price = stamperprice;
    }
    return current gold price;
    
    This would also allow us to ensure the cheapest stampers are always favored and get a good price.
    It would inccrease the number of tranzactions, however, as it would mean one big order would be spread across many many stampers. Not sure how to optimize that at the moment.
